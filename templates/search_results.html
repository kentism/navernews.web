<!-- ============================================================================ -->
<!-- NEWS RESULTS LISTS -->
<!-- This template is rendered server-side and injected into search tabs -->
<!-- ============================================================================ -->

<div class="search-results-list">
    {% for item in items %}
    <!-- Single News Card -->
    <div class="news-card" data-title="{{ item.title | escape }}" data-link="{{ item.link }}"
        data-source="{{ item.source }}" data-pubdate="{{ item.pubDate }}" data-originallink="{{ item.originallink }}"
        data-domain="{{ item.domain }}">

        <!-- Header: Source and Date -->
        <div class="news-header">
            <span class="news-source">{{ item.source }}</span>
            <span class="news-date">{{ item.pubDate | time_ago }}</span>
        </div>

        <!-- Title with Keyword Highlight -->
        <h3 class="news-title">{{ item.title | highlight(keyword) }}</h3>

        <!-- Description with Keyword Highlight -->
        <p class="news-desc">{{ item.description | highlight(keyword) }}</p>

        <!-- Action Buttons -->
        <div class="news-actions">
            <!-- Clipping Action with Popup Menu -->
            <div class="clip-selector-wrapper">
                <button class="btn-small btn-primary btn-clip-trigger" type="button" data-title="{{ item.title }}"
                    data-link="{{ item.link }}" data-source="{{ item.source }}" data-pubdate="{{ item.pubDate }}"
                    data-originallink="{{ item.originallink }}" onclick="toggleClipMenu(this)">
                    ğŸ“Œ í´ë¦½
                </button>
                <div class="clip-popup-menu">
                    <button type="button"
                        onclick="clipArticleFromData(this.parentElement.previousElementSibling.dataset.title, this.parentElement.previousElementSibling.dataset.link, '', this.parentElement.previousElementSibling.dataset.source, this.parentElement.previousElementSibling.dataset.pubdate, this.parentElement.previousElementSibling.dataset.originallink, this.parentElement.previousElementSibling, 'ìœ„ì›íšŒ ê´€ë ¨'); toggleClipMenu(this.parentElement.previousElementSibling);">ìœ„ì›íšŒ
                        ê´€ë ¨</button>
                    <button type="button"
                        onclick="clipArticleFromData(this.parentElement.previousElementSibling.dataset.title, this.parentElement.previousElementSibling.dataset.link, '', this.parentElement.previousElementSibling.dataset.source, this.parentElement.previousElementSibling.dataset.pubdate, this.parentElement.previousElementSibling.dataset.originallink, this.parentElement.previousElementSibling, 'ë°©ì†¡Â·í†µì‹  ê´€ë ¨'); toggleClipMenu(this.parentElement.previousElementSibling);">ë°©ì†¡Â·í†µì‹ 
                        ê´€ë ¨</button>
                    <button type="button"
                        onclick="clipArticleFromData(this.parentElement.previousElementSibling.dataset.title, this.parentElement.previousElementSibling.dataset.link, '', this.parentElement.previousElementSibling.dataset.source, this.parentElement.previousElementSibling.dataset.pubdate, this.parentElement.previousElementSibling.dataset.originallink, this.parentElement.previousElementSibling, 'ìœ ê´€ê¸°ê´€ ê´€ë ¨'); toggleClipMenu(this.parentElement.previousElementSibling);">ìœ ê´€ê¸°ê´€
                        ê´€ë ¨</button>
                    <button type="button"
                        onclick="clipArticleFromData(this.parentElement.previousElementSibling.dataset.title, this.parentElement.previousElementSibling.dataset.link, '', this.parentElement.previousElementSibling.dataset.source, this.parentElement.previousElementSibling.dataset.pubdate, this.parentElement.previousElementSibling.dataset.originallink, this.parentElement.previousElementSibling, 'ê¸°íƒ€ ê´€ë ¨'); toggleClipMenu(this.parentElement.previousElementSibling);">ê¸°íƒ€
                        ê´€ë ¨</button>
                </div>
            </div>

            <!-- Naver Link -->
            <a class="btn-small" href="{{ item.link }}" target="_blank" onclick="event.stopPropagation();">
                ğŸ”— ë„¤ì´ë²„ì—ì„œ ë³´ê¸°
            </a>

            <!-- Original Link (if available) -->
            {% if item.originallink %}
            <a class="btn-small" href="{{ item.originallink }}" target="_blank" onclick="event.stopPropagation();">
                ğŸŒ ì–¸ë¡ ì‚¬ì—ì„œ ë³´ê¸°
            </a>
            {% endif %}
        </div>
    </div>
    {% endfor %}

    <!-- Empty State -->
    {% if items|length == 0 %}
    <div class="empty-state">
        <p>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</p>
    </div>
    {% endif %}
</div>